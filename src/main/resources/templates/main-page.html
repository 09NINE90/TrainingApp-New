<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Главная</title>
  <meta th:name="_csrf" th:content="${_csrf.token}"/>
  <meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/css/main.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link rel="stylesheet" href="style.css">
  <script th:src="@{/js/anime.min.js}"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>

<body>
<div class="nav-include" th:include="menu.html"></div>
<div class="profile">
  <h2>Главная <a href='/user/logout' data-item='выйти'>выйти</a></h2>
  <div class="contact">
    <p>Email: <span id="user-email"></span></p>
    <p>Имя: <span id="user-first-name"></span></p>
    <p>Фамилия: <span id="user-last-name"></span></p>
    <p style="display: none">Роль: <span id="user-role"></span></p>
  </div>
  <div class="add_btn" th:if="${#authorization.expression('hasRole(''ROLE_USER'')')}">
    <a href='/user/getUserPhysicalParametersFormPage' data-item='Добавить данные в таблицу'>Добавить данные в таблицу</a>
  </div>
  <div class="add_btn" th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'') or hasRole(''ROLE_COACH'')')}">
    <a href='/user/create' data-item='Добавить пользователя'>Добавить пользователя</a>
  </div>
  <div class="table-container"></div>
</div>
<script>
  let condition = true;

  function forward() {
    anime({
      targets: '.menu-small',
      translateX: ['-100%', '0'],
      easing: 'easeInOutQuad',
      direction: 'alternate',
      duration: 500,
      loop: false
    });

    condition = false
  }

  function backward() {
    anime({
      targets: '.menu-small',
      translateX: ['0', '-100%'],
      easing: 'easeInOutQuad',
      direction: 'alternate',
      duration: 500,
      loop: false
    });

    condition = true
  }

  $('.menu_small_icon').click(function () {
    if (condition) {
      forward();
    } else {
      backward();
    }
  });

  let start = 0;
  let end = 0;
  $('.container').on('touchstart', function (event) {
    start = event.originalEvent.touches[0].pageX;
  });
  $('.container').on('touchend', function (event) {
    end = event.originalEvent.changedTouches[0].pageX;
    if (end - start >= 100 && condition) {
      forward();
    } else if (start - end >= 100 && !condition) {
      backward();
    }

  });
</script>
<script th:src="@{/js/main.js}"></script>
</body>
</html>